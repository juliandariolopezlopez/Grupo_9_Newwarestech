<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css//user/register.css" />
    <link rel="stylesheet" href="/css/product/style-carrito.css">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Formulario Registro</title>
  </head>
  <body>
    
     <div class="contenedor">

      <%- include('../partials/header') %>

       <section class="main">
        <div class="header"><h3>CREA TU CUENTA</h3></div>
        <div class="contenedor">

          
          <div style="color: red;">
            <ul>
              <% if(errors.length>0){%>
                <h4 style="color: red;">Por favor revise el formulario a llenar:</h4>
               
                <% errors.forEach(elemento=>{%>
            
               <li>
                  <% if (elemento.path==='nombre') { %>
                    <%= elemento.msg%>
                  <% } %>
                  <% if (elemento.path==='apellido') { %>
                    <%= elemento.msg%>
                  <% } %>
                  <% if (elemento.path==='email') { %>
                    <%= elemento.msg%>
                  <% } %>
                  <% if (elemento.path==='password') { %>
                    <%= elemento.msg%>
                  <% } %>
                  <% }) %>
                  <% } %>
                  </li>
                </ul>
              </div>


          <form action='/users/register' method="POST"> 
            <div>
            <label for="username">
              <% if(errors.length>0){ %>
                <% }else{%>
                  <span>username</span>
               <% } %>
              <input type="text" name="username" id="username" value="<%= values.username %>">
              <p class="errors" style="color: red;"></p>
            </label>
            </div> 


          <div>
            <label for="email">
              <% if(errors.length>0){ %>
                <% }else{%>
                  <span>Correo</span>
               <% } %>
              <input type="email" name="email" id="email" value="<%= values.email %>" />
              <p class="errors" style="color: red;"></p>
            </label>
          </div>

          <div>
            <label for="password">
              <% if(errors.length>0){ %>
                <% }else{%>
                  <span>Contraseña</span>
               <% } %>
    
              <input type="password" name="password" id="password"/>
              <p class="errors" style="color: red;"></p>
            </label>
          </div> 

          <div>
            <label for="confirmpassword">
              <% if(errors.length>0){ %>
                  
                <% }else{%>
                  <span>Confirmar Contreseña</span>
               <% } %>
              <input type="password" name="confirmpassword" id="confirmpassword"/>
              <p class="errors" style="color: red;"></p>
            </label>
          </div>

          <div>
            <label for="image">
              <span>Foto</span>
              <input type="file" name="image" id="image">
              <p class="errors" style="color: red;"></p>
            </label>
          </div>

            <div>
              <input type="checkbox" name="robot">
              No soy un robot  
            </div>

              <div>
              <input type="submit" disabled id="submit-boton" value="Crear Cuenta">
              </div>
          
          </form>
          <script> 
            
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {

              input.onfocus = ()=>{
                    input.previousElementSibling.classList.add('top');
                    input.previousElementSibling.classList.add('focus');
                    input.parentNode.classList.add('focus');
              }


              // ESTO NO PERMITE QUE PASE LA INFORMACION AL REQ.BODY!!!

              input.onblur =()=>{
                input.value = input.value.trim();
                if(input.value.trim().length == 0){
                  input.previousElementSibling.classList.remove('top');
                }
                    input.previousElementSibling.classList.remove('focus');
                    input.parentNode.classList.remove('focus');
              }

            });

          </script>

          <p>¿Ya tienes una cuenta? <a href="#">Inicia sesión</a>.</p>
          
        </div>
      </section>
      <%- include('../partials/footer') %>
    </div>
    <script src="../../public/js/registerForm.js"></script>
  </body>
</html>
